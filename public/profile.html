<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Omnifood is an AI-powered food subscription that will make you eat healthy again, 365 days per year. It's tailored to your personal tastes and nutritional needs.">
    <link rel="icon" href="img/favicon.webp" />
    <link rel="apple-touch-icon" href="img/apple-touch-icon.webp" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/general.css" />
    <!-- ================================================== -->
    <link rel="stylesheet" href="css/addtional.css" />
    <link rel="stylesheet" href="css/CTA.css" />
    <link rel="stylesheet" href="css/feature_how.css" />
    <link rel="stylesheet" href="css/fontqueries.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/herosection.css" />
    <link rel="stylesheet" href="css/location_navbar.css" />
    <link rel="stylesheet" href="css/meals.css" />
    <link rel="stylesheet" href="css/navigation.css" />
    <link rel="stylesheet" href="css/pricing.css" />
    <link rel="stylesheet" href="css/scrollbtn.css" />
    <link rel="stylesheet" href="css/testimonials.css" />
    <!-- ===================== -->
    <link rel="stylesheet" href="css/queries.css" />
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <title>OmniFood | Profile</title>

    <!-- Open Graph Meta Tags (for Facebook, LinkedIn, etc.) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Omnifood - Never Cook Again!" />
    <meta property="og:description"
        content="AI-powered meal plans that ensure healthy, hassle-free eating. Subscribe today and let Omnifood handle your nutrition!" />
    <meta property="og:image" content="https://omnifood-meal-available.netlify.app/omnifood-logo.avif" />
    <meta property="og:url" content="https://omnifood-meal-available.netlify.app/" />
    <meta property="og:site_name" content="Omnifood" />

    <!-- Instagram Meta Tags (Optional) -->
    <meta property="ig:app_id" content="gaurav._.karakoti" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Omnifood - Never Cook Again!" />
    <meta name="twitter:description"
        content="AI-powered meal plans that ensure healthy, hassle-free eating. Subscribe today and let Omnifood handle your nutrition!" />
    <meta name="twitter:image" content="https://omnifood-meal-available.netlify.app/omnifood-logo.avif" />
    <meta name="twitter:site" content="@GauravKara_Koti" />
    <meta name="twitter:creator" content="@GauravKara_Koti" />

</head>

<body>
    <header class="header">
        <a href="/">
            <picture>
                <source class="logo" srcset="img/omnifood-logo.avif" type="image/avif" />
                <img class="logo" alt="Omnifood Logo" src="img/omnifood-logo.png" />
            </picture>
        </a>
        <nav class="main-nav">
            <ul class="main-nav-list">
                <li><a href="/" class="main-nav-link">Home</a></li>
                <li><a href="./login/login.html" class="main-nav-link auth">Login</a></li>
                <li>
                    <a href="/login/login.html" class="main-nav-link logout">Logout</a>
                </li>
            </ul>
        </nav>
        <button class="btn-mobile-nav">
            <ion-icon class="icon-mobile-nav" name="menu-outline"></ion-icon>
            <ion-icon class="icon-mobile-nav" name="close-outline"></ion-icon>
        </button>
    </header>
    <main>
        <div class="profile-header">
            <div class="profile-info">
                <img src="" alt="User Avatar" class="avatar">
                <h2 class="username">Aditya Swayamsiddha</h2>
                <p class="email">aditya@example.com</p>
                <button class="btn">Edit Profile</button>
            </div>
        </div>

        <div class="profile-content">
            <section class="user-info">
                <h3>üçΩÔ∏è Favorite Cuisines</h3>
                <div class="cuisine-tags">
                    <span class="tag">Italian</span>
                    <span class="tag">Indian</span>
                    <span class="tag">Mexican</span>
                    <span class="tag">Chinese</span>
                </div>

                <h3>üìç Address</h3>
                <p>123 Foodie Lane, Bhubaneswar, India</p>

                <h3>üìû Contact</h3>
                <p>Phone: +91 98765 43210</p>
            </section>

            <section class="recent-orders">
                <h3>üõí Recent Orders</h3>
                <div class="order">
                    <img src="./img/meals/meal-1.jpg" alt="Pizza">
                    <div class="order-info">
                        <h4>Japanese Gyozas</h4>
                        <p>Ordered on: 22 March 2025</p>
                        <span class="status delivered">Delivered</span>
                    </div>
                </div>

                <div class="order">
                    <img src="img/meals/meal-2.jpg" alt="Burger">
                    <div class="order-info">
                        <h4>Avocado Salad</h4>
                        <p>Ordered on: 18 March 2025</p>
                        <span class="status pending">Pending</span>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container grid grid--5-cols">
            <div class="logo-col">
                <a href="#" class="footer-logo">
                    <picture>
                        <source srcset="img/omnifood-logo.avif" type="image/avif">
                        <source srcset="img/omnifood-logo.webp" type="image/webp">
                        <img class="logo" alt="Omnifood Logo" src="img/omnifood-logo.png" loading="lazy">
                    </picture>

                    <!-- Preload AVIF format for faster loading -->
                    <link rel="preload" as="image" href="img/omnifood-logo.avif" type="image/avif">

                </a>
                <ul class="social-links">
                    <li>
                        <a class="footer-link" href="https://instagram.com/gaurav._.karakoti" target="_blank"
                            rel="noopener noreferrer" aria-label="Follow on Instagram">
                            <ion-icon class="social-icon" name="logo-instagram"></ion-icon>
                        </a>
                    </li>
                    <li>
                        <a class="footer-link" href="https://x.com/GauravKara_Koti" target="_blank"
                            rel="noopener noreferrer" aria-label="Follow on X (formerly Twitter)">
                            <i class='bi bi-twitter-x' style='font-size:18px'></i>
                        </a>
                    </li>
                </ul>
                <p class="copyright">
                    Copyright &copy; <span id="year"></span> by Omnifood, Inc. All rights reserved.
                </p>
            </div>
            <div class="address-col">
                <p class="footer-heading">Contact us</p>
                <address class="contacts">
                    <p class="address">
                        623 Marrison St., 2nd Floor, Sand Francisco, CA 94107
                    </p>
                    <p>
                        <a class="footer-link" href="tel:+919310556492">+91 93105 56492</a><br />
                        <a class="footer-link" href="mailto:karakotigaurav12@gmail.com">karakotigaurav12@gmail.com</a>
                    </p>
                </address>
            </div>
            <nav class="nav-col">
                <p class="footer-heading">Account</p>
                <ul class="footer-nav">
                    <li><a class="footer-link" href="https://omnifood-meal-available.netlify.app/login/login">Create
                            Account</a></li>
                    <li><a class="footer-link" href="https://omnifood-meal-available.netlify.app/login/login">Sign
                            in</a></li>
                    <li><a class="footer-link" href="#">iOS app</a></li>
                    <li><a class="footer-link" href="#">Android app</a></li>
                </ul>
            </nav>
            <nav class="nav-col">
                <p class="footer-heading">Company</p>
                <ul class="footer-nav">
                    <li><a class="footer-link" href="#">About Omnifood</a></li>
                    <li><a class="footer-link" href="#">For Business</a></li>
                    <li><a class="footer-link" href="#">Cooking partners</a></li>
                    <li><a class="footer-link" href="#">Careers</a></li>
                </ul>
            </nav>
            <nav class="nav-col">
                <p class="footer-heading">Resources</p>
                <ul class="footer-nav">
                    <li><a class="footer-link" href="#">Recipe directory</a></li>
                    <li><a class="footer-link" href="#">Help center</a></li>
                    <li><a class="footer-link" href="#">Privacy & terms</a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <script>
        document.getElementById("year").textContent = new Date().getFullYear();

        function md5(email) {
            return CryptoJS.MD5(email.trim().toLowerCase()).toString();
        }

        let username = document.querySelector(".username");
        let email = document.querySelector(".email");

        let loginUserName = localStorage.getItem("omni:username");
        let loginEmail = localStorage.getItem("omni:email");

        if (loginUserName && loginEmail) {
            username.textContent = loginUserName.charAt(0).toUpperCase() + loginUserName.slice(1);
            email.textContent = loginEmail;
        }
        else {
            window.location.href = "/login/login.html";
        }
        document.addEventListener("DOMContentLoaded", function () {
            const isAuthenticated = localStorage.getItem("omni:authenticated");
            const username = localStorage.getItem("omni:username");
            const email = localStorage.getItem("omni:email");
            const authLink = document.querySelector(".auth");

            if (isAuthenticated) {
                authLink.textContent = `Welcome back, ${username} üëã`;
                authLink.href = "/profile.html";
            }
            if (email) {
                const hashedEmail = md5(email);
                console.log(hashedEmail)
                const avatarUrl = `https://www.gravatar.com/avatar/${hashedEmail}?d=identicon&s=200`;

                const avatarImg = document.querySelector(".avatar");
                if (avatarUrl) {
                    avatarImg.src = avatarUrl;
                } else {
                    avatarImg.src = "./img/customers/dave.jpg";
                }
                avatarImg.alt = `${username}'s Avatar`;
            }
        });

        // Logout 
        async function logoutFunc() {
            let url = "http://localhost:5000/api/auth/logout";
            let response = await fetch(url, {
                method: "GET",
                credentials: "include"
            });
            if (response.ok) {
                localStorage.removeItem("omni:authenticated");
                localStorage.removeItem("omni:username");
                localStorage.removeItem("omni:email");
                window.location.href = "/login/login.html";
            }
        }
        let logout = document.querySelector(".logout");
        logout.addEventListener("click", function () {
            logoutFunc();
        });

    </script>
</body>

</html>